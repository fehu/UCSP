% % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % VI
\section{Agent Roles}

\begin{frame}{Agent Roles}

  \begin{center}
  \begin{tikzpicture}[every node/.style={text width=1.5cm, align=center}]
    \node[draw, rounded corners,dashed, inner sep=8pt] (C) {Controller};
    \node[color=blue, below=2cm of C] (P) {Professors};
    \node[color=blue, left=of P]  (G) {Groups};
    \node[color=blue, right=of P] (H) {Schedule Holders};
    \draw[->, >=stealth, dashed] (C) -- (G);
    \draw[->, >=stealth, dashed] (C) -- (P);
    \draw[->, >=stealth, dashed] (C) -- (H);
    \node[color=blue, below=of H, xshift=-1cm] (HH) {Holders};
    \node[color=blue, below=of H, xshift=1cm]  (HO) {Observer};
    \draw[->, >=stealth, blue] (H) -- (HH);
    \draw[->, >=stealth, blue] (H) -- (HO);
  \end{tikzpicture}
  \end{center}

  \bigskip

  \blue{Groups} and \blue{Observer} have \underline{active} behaviour, while \\
  \blue{Professors} and \blue{Holders} exhibit only the \underline{reactive} one.

\end{frame}

% % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % %
\input{Agent-Roles/1-Group}
% % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % %

% % % % % % % % % % % % % % % % % % % % Professor/Group
\subsection{Professor/Group}

\begin{frame}{Professor/Group Reactions}
  \centering
  \clipbox{180pt 390 20 0}{ %{left bottom right top}
    \resizebox{\textwidth}{!}{
      \input{\rootdir/img/SolutionProcess-content.tikz}
    }
  }\\[-5pt]
  \clipbox{180pt 160 20 290}{ %{left bottom right top}
    \resizebox{\textwidth}{!}{
      \input{\rootdir/img/SolutionProcess-content.tikz}
    }
  }
\end{frame}

% % % % % % % % % % % % % % % % % % % %
\subsection{Schedule Holders}
\subsubsection{Schedule Holders}

\def\ttable{\tiny%
  \def\var{\texttt{var}}
  \begin{tabular}{|c||c|c|c|}
    \hline  & M        & $\cdots$ & S       \\\hhline{|=##=|=|=|}
    8:00    & \var     & $\cdots$ & \var    \\\hline
    $\cdots$& $\cdots$ & $\cdots$ & $\cdots$\\\hline
    21:30   & \var     & $\cdots$ & \var    \\\hline
  \end{tabular}}

\begin{frame}{Schedule Holders}
  \begin{block}{Reactions}
    \begin{itemize}
      \item Put candidate into the schedule. Results in either success or conflict.
            In latter case, the conflicting candidates are attached to the response.
      \item Put a candidate, removing conflicting candidates and notifying their
            creators. Requires a proof of \alert{superiority} for each conflict.
    \end{itemize}
  \end{block}
  \begin{block}{Underlying Timetable Holders}
    \centering
    \bigskip
    \begin{columns}
      \begin{column}{.1\textwidth}\end{column}
      \begin{column}{.3\textwidth}
        \centering Classroom 1 \\\medskip \ttable
      \end{column}
      \begin{column}{.04\textwidth}
        $\Huge \cdots$
      \end{column}
      \begin{column}{.3\textwidth}
        \centering Classroom M \\\medskip \ttable
      \end{column}
      \begin{column}{.1\textwidth}\end{column}
    \end{columns}
  \end{block}
\end{frame}

\begin{frame}{Schedule Holders Reactions}
  \centering
  \clipbox{295pt 490 -90 0}{ %{left bottom right top}
    \resizebox{\textwidth}{!}{
      \input{\rootdir/img/SolutionProcess-content.tikz}
    }
  }\\[-5pt]
  \clipbox{295pt 300 -90 140}{ %{left bottom right top}
    \resizebox{\textwidth}{!}{
      \input{\rootdir/img/SolutionProcess-content.tikz}
    }
  }\\[-5pt]
  \clipbox{295pt 100 -90 340}{ %{left bottom right top}
    \resizebox{\textwidth}{!}{
      \input{\rootdir/img/SolutionProcess-content.tikz}
    }
  }
\end{frame}

% % % % % % % % % % % % % % % % % % % %
\subsubsection{Schedule Observer}

\begin{frame}{Schedule Observer}
  Monitors schedule's state and reports possible solutions
  \bigskip
  \begin{block}{Solution is Complete}
    when
    \begin{enumerate}
      \item it contains candidates of all groups
      \item was positively assessed in \emph{final} mode
    \end{enumerate}
  \end{block}
  \bigskip
  \centering
  \marginbox{-10pt 0 0 0}{
    \clipbox{-35pt -2 -70 314}{ %{left bottom right top}
      \resizebox{.7\textwidth}{!}{
        \input{\rootdir/img/SolutionProcess-content.tikz}
      }
    }
  }
  % \begin{block}{If Positively Assessed}
  %   \begin{columns}[t]
  %     \begin{column}{.4\textwidth}
  %       \begin{block}{Then}
  %         \begin{itemize}
  %           \item Notify listeners
  %           \item Demand agents to provide better solution
  %         \end{itemize}
  %       \end{block}
  %     \end{column}
  %     \begin{column}{.4\textwidth}
  %       \begin{block}{Else}
  %         \begin{itemize}
  %           \item Demand agents to provide another solution
  %         \end{itemize}
  %       \end{block}
  %     \end{column}
  %   \end{columns}
  % \end{block}
\end{frame}
