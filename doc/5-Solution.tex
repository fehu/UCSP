\documentclass[ThesisDoc]{subfiles}

\providecommand{\rootdir}{.}
\input{MathDefs}

\begin{document}

\chapter{Proposed Solution}
\label{chapter:solution}


The solution, proposed by this \thisdoc, is based on \emph{agents negotiation}
over the \emph{candidates}, generated by the agents, representing groups.
Professors are purely reactive, with no proactive behavior defined.
There is also a third kind of agents --- \emph{schedule holders}, that are
a mean of putting individual candidates together.

The main measure of candidates' fitness is \emph{coherence}, that is calculated
using agents' \emph{contexts}. The other measure is ``rareness'' and it would be
described in section \ref{sec:solution-compare}.

Solution diagram is presented on figure \ref{fig:solution-flow}.

% % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % %

\subfile{Solution/FormalProblem}

\subfile{Solution/Contexts}


% % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % %
\medskip\crule{0.5}\medskip

\noindent
A candidate is propagated through the contexts, being assessed at each one.
It continues until all the context have been assessed or the candidate couldn't
``pass'' some context because its local coherence estimation was found less then
the corresponding context-specific threshold. Estimated coherence value,
context threshold satisfaction and estimation \emph{details}
are attached to the candidate. The contexts are held by an agent.
Coherence estimation by agent $a$:

\begin{align*}
  & \coh_a: \Candidate \mapsto \Re \times \Bool \times \{\left<\Re,\Details\right>\}
  \\[.3em]
  & \coh_a(\tilde{c}) = \coh'_a(\bar{c}, \mathrm{contexts}(a), \{\}),
    \mathrm{where}~ \bar{c} = \{c ~|~ \forall\, c \in \tilde{c} \land
                                           c~ \mathrm{mentions}~ a \}
  \\\\
  & \coh'_a: \Candidate \mapsto \{\Context\}
             \mapsto \{\left<\Re,\Details\right>\}
             \mapsto \Re \times \Bool \times \{\left<\Re,\Details\right>\}
  \\[.3em]
  & \coh'_a(\bar{c}, \{ \ctx, \ctx_{\dots} \}, \acc) =
    \letIn{\left<x,b,d\right> = \coh[\ctx](\bar{c})}
      {\begin{cases}
          \coh'_a(\bar{c}, \ctx_{\dots}, \{\acc, \left<x,d\right>\}) & \mathbf{if}\, b \\
          \left<x,\false, \{\acc, \left<x,d\right>\}\right>          & \mathbf{otherwise}
        \end{cases}}\\
  & \coh'_a(\bar{c}, \{\}, \acc) =
    \letIn{ \left<x,d\right> = \mathrm{last}(\acc)}
          { \left<x,\true,\acc\right> }
\end{align*}

 % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % %

\subfile{Solution/Agent}
\subfile{Solution/Agent/Group}
\subfile{Solution/Agent/Professor}
\subfile{Solution/Agent/Schedule}

% % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % %

\begin{figure}[h]
    \centering
    \resizebox{0.7\textwidth}{!}{
      \subfile{\rootdir/img/SolutionProcess.tikz}
      }
  \caption{Solution process diagram.}
  \label{fig:solution-flow}
\end{figure}




\end{document}
