\documentclass[../../ThesisDoc]{subfiles}
% \documentclass{standalone}
%
% \usepackage{tikz, pgfplots}
% \usetikzlibrary{fit, matrix, positioning, shapes, decorations.pathreplacing,
%                 shapes.geometric, chains, arrows, calc }


\begin{document}



\begin{tikzpicture}[
  cArr/.style={<-, thick, =<stealth}
  ]

\def\x{$\bullet$}
\matrix (m) [matrix of nodes, nodes in empty cells,
  column sep=0pt, row sep=0pt, inner sep=0pt,
  nodes={ draw, color=lightgray, text=black, minimum size=1cm, anchor=center },
  column 6/.style={nodes={draw=none}},
  column 12/.style={nodes={draw=none}},
  row 1/.style={nodes={draw=none}},
  ]{
 $s_1$ & \dots & $s_i$ & \dots & $s_n$ &        & $p_1$ & \dots & $p_k$ & \dots & $p_m$ &        & $r_1$ & \dots & $r_j$ & \dots & $r_J$ \\
  \x   &  \x   &  \x   &       &       & $g_1$  &       &  \x   &       &       &       & $g_1$  &  \x   &       &  \x   &       &       \\
       &  \x   &  \x   &  \x   &       & \vdots &       &       &  \x   &       &       & \vdots &       &  \x   &       &  \x   &  \x   \\
       &       &  \x   &  \x   &  \x   & $g_t$  &       &       &       &       &  \x   & $g_t$  &  \x   &       &  \x   &       &       \\
  \x   &       &       &       &  \x   & \vdots &       &       &  \x   &       &       & \vdots &       &  \x   &       &  \x   &       \\
  \x   &  \x   &       &  \x   &       & $g_*$  &  \x   &       &       &       &       & $g_*$  &       &       &  \x   &       &  \x   \\
};

\draw[cArr] (m-4-17) -- node[text width=3cm, align=center, xshift=2pt]
                           {Classes of group $g_t$ with unique professor $p_m$
                            in rooms $\{r_*\}$ }
          ++(3cm,0);
\draw[cArr] (m-6-9) -- node[right, yshift=-2pt] {Classes of professor $p_k$}
          ++(0,-1cm);
\draw[cArr] (m-6-15) -- node[right, yshift=-2pt] {Classes in room $r_j$}
          ++(0,-1cm);
\draw [decorate,decoration={brace,amplitude=10pt,mirror,raise=4pt}]
      ($(m-6-6)+(1em,-3em)$) -- node[below=12pt]{$\bullet$ --- set of classes}
      ++(11.5,0);

\draw[cArr] (m-4-1) -- node[text width=2cm, align=center]
                           {Students in group $g_t$}
          ++(-2cm,0);
\draw[cArr] (m-6-3) -- node[ yshift=-2pt] {Groups of student $s_i$}
          ++(0,-1cm);
\draw [decorate,decoration={brace,amplitude=10pt,raise=4pt}]
      ($(m-6-6)+(-1em,-3em)$) -- node[below=12pt]
                                 {$\bullet$ --- student belongs to group}
      ++(-5.4,0);

\end{tikzpicture}
\end{document}
