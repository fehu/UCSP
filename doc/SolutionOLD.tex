\documentclass[ThesisDoc]{subfiles}

\providecommand{\rootdir}{.}
\input{MathDefs}

\begin{document}

\section{Proposed Solution}
% \green{Explicar la solución de manera informal, y después ...}
% \medskip

% \noindent
The solution is based on \emph{agents negotiation} over
\emph{solution candidates} --- sets of classes. Negotiation is represented by
two communication processes:
\begin{enumerate*}[1)]
  \item external contexts' opinions exchange;
  \item direct negotiation over a candidate.
\end{enumerate*}
Decision is made using candidates' coherence, that is assessed at agent's
\emph{contexts} (see section \ref{sec:coherence}). The best candidate
(in coherence terms) is stored regardless of the decision taken.

A candidate is propagated through the contexts to obtain \emph{coherence estimation}
of the former.
Estimation also includes an interpretation for each context:
\begin{itemize}
  \item Coherence value, assessed at given context.
  \item Whether candidate is coherent: estimated coherence value is not less than
        context-defined threshold.
  \item Context-specific details.
\end{itemize}
If a candidate was found incoherent with agent's obligations or desires, it
is propagated no further.


% \medskip
%
% \noindent
% \emph{Group agents} play active role in the negotiation.
% Initially, each group generates a \emph{random candidate}.
% Generation process ensures that \emph{class coherence} constraints
% ($\restrC$ and $\restrT$) are satisfied, thus implementing \textit{Capabilities}
% and \textit{Time Consistency} contexts at once. It consists of three stages:
% \begin{enumerate}
%   \item \emph{Class-core pool} generation. A pool is a lazy random sequence of
%     \emph{class-cores}: \emph{group}--\emph{discipline}--\emph{professor} relations.
%     Every class core is internally coherent (capabilities are matched: $\restrC$).
%   \item Generation of a \emph{class-cores} from the pool.
%   \item \emph{Day--Time--Room} assignment. Values are generated randomly for the
%         entire set of class-cores, respecting time restrictions $\restrT$.
%         % Classes duration is specified alongside each discipline.
% \end{enumerate}
%
% \noindent
% After estimating generated candidate's coherence, a decision is chosen:
% \begin{itemize}
%   \item Create new class-core pool.
%   \item Try next class-core.
%   \item Try another day--time--room configuration.
%   \item Assess coherence in another \emph{mode}.
%   \item Negotiate over a candidate.
%   \item Fail with error.
% \end{itemize}
%
% \medskip
%
% \noindent
Each agent's goal is \emph{best candidate improvement}, that results in constant
search for better candidates until the negotiation is stopped externally.
The negotiation is considered \emph{successful} and begins generating
possible schedules when all the participants' best candidates are \emph{fully} coherent.

% % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % %

\subfile{Solution/Contexts}
\subfile{Solution/Agent}

% % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % %

\subfile{Solution/Agent/Group}
\subfile{Solution/Agent/Professor}

\subfile{Solution/CandidateNegotiation}

% % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % %


% Each participant $p$ (professor or group) is represented in the negotiation
% by a single agent $a_p$, that holds person-specific restrictions and optimization criteria
% in its contexts: $ \{\xi^a_i\} \in a_p$. The internal contexts contain to
% the restrictions, defined in section \ref{sec:ProblemFormal}:
% \begin{align*}
%    \text{Capabilities}      &\hbox{ --- } \restrC
% &  \text{Time consistency}  &\hbox{ --- } \restrT
% \\ \text{Obligations}       &\hbox{ --- } \restrS
% &  \text{Preferences}       &\hbox{ --- } \restrW
% \end{align*}
%
% The \emph{external} context is not person-specific, but is implemented in the
% same way for all the negotiating agents. As mentioned before, it is a mean for the
% agents to pursue a common goal (section \ref{sec:CommonGoal}) and ensure
% \ref{eq:coh-fun-independ} property.




% \subsubsection{Contexts Formalization}
% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% The constraints are defined in the contexts in a more generic way than in problem
% formalization. They handle \emph{pieces of information},
% that are candidates' underlying classes and \emph{context-specific knowledge},
% joined together.
% A constraint in context $\ctx$ of agent $a$ can have two forms:
% \begin{itemize}[leftmargin=2cm]
%   \item[binary] $ \xi_{i_2}^{\ctx^a} : \left< x,y \right> \mapsto \maybe \codom_\ctx $
%   \item[whole]  $ \xi_{i_w}^{\ctx^a} : \{i_*\} \mapsto \codom_\ctx $
%   \item[] where $x, y$ and $i_*$ are \emph{pieces of information};
%     the $\codom$ of the constraint functions depends on the context $\ctx$.
%     $\maybe v$ can have two underlying values: Just $v$ and Nothing.
%     Nothing is used to denote that the binary relation doesn't handle pieces of information
%     of given types.
% \end{itemize}
%
% As described in section \ref{sec:coherence}, the contexts require their
% constraint functions to have following codomains:
% \begin{align*}
%    \text{Capabilities}      &\hbox{ --- } \{0, 1\}
% &  \text{Time consistency}  &\hbox{ --- } \{-1, 0, 1\}
% \\ \text{Obligations}       &\hbox{ --- } \{0, 1\}
% &  \text{Preferences}       &\hbox{ --- } [0, 1]
% \\ \text{External}          &\hbox{ --- } [0, 1] &
% \end{align*}
%
%
% Each context must define \emph{combination functions} $\eta$, that constructs a
% single coherence value out of the values, yielded by the constraints.
%
% Then coherence of candidate $\tilde c$ at context $\ctx^a$
% is calculated as \\ $\coh^{\ctx^a}(\tilde c) = \eta(\{b^k\}, \{w^k\})$, where
% \begin{align*}
%   \{b^k\}  &= \{b_{ij}^k | \forall \text{pieces of information } i, j | i \not= j \} \\
%   b_{ij}^k &= \xi_{k_2}^{\ctx^a}(i,j) \\
%   &\\
%   w^k      &= \xi_{k_w}^{\ctx^a}(\{\text{pieces of information}\})
% \end{align*}
%
% \todo\red{: propose function $\eta$.}
%
% \medskip
%
% \noindent
% In order for a candidate $\tilde c$ to be accepted at the context $\ctx$
% of agent $a$, it's coherence must not be less than context-specific threshold,
% that can depend on negotiation duration:
% $$ \coh^{\ctx^a}(\tilde c) \geq \rho^{\ctx^a}(\tau) $$
%
% \bigskip
%
% \noindent
% A context $\ctx$ of agent $a$ is defined as tuple, containing its
% context-specific knowledge, relations, combination function and threshold.
%
% $$ \ctx^a \sim \left< \mathit{knowledge^{\ctx^a}},
%                       \{\xi_{i_2}^{\ctx^a}\},
%                       \{\xi_{i_w}^{\ctx^a}\},
%                       \eta_\ctx,
%                       \rho^{\ctx^a}(\tau)
%                \right> $$











% Each context defines it's context-specific knowledge, constraints of two kinds
% and a threshold. Constraints codomains depend on the context and are already
% described in section \ref{sec:ProblemFormal}.
% The constraints can have two forms (but both can be represented in the second one):
% \begin{itemize}
%   \item[binary] $\left< x, y \right> \mapsto \mathrm{codomain}$
%   \item[]
% \end{itemize}


% Let a \emph{negotiating coherence-based} agent $a$ be an entity that defines
% the following operations over it:
% \begin{itemize}
%   \item[\textit{contexts}]
% \end{itemize}


% For each participant professor, group, and classroom an agent of the corresponding
% role is defined

% As defined in section \ref{sec:ProblemFormal}, there are


% The restrictions from problem definition in section \ref{sec:ProblemFormal}
% are already defined, taking into account the agent.

% \todo







%     The final decision is based on a set of \emph{acceptable candidates}, that
%     have complied successfully with all the contexts' restrictions. It should
%     choose whether to:
%     \begin{itemize}
%       \item add new classes proposals (and remove some old), in case no
%         acceptable candidate was found;
%       \item select the candidate with maximum coherence as the solution and
%         request acceptance confirmation from the ``neighboring'' agents.
%     \end{itemize}


\end{document}
