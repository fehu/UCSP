
% % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % %

\newcommand{\drawAllCandidates}[2][]{
  \newpicture{
    \drawFirstCandidate{#2}{false}
    \drawSecondCandidate{#2}{false}
    \drawThirdCandidate{#2}{false}
  }{#1}
}

\newcommand{\drawTwoCandidates}[2][]{
  \newpicture{
    \drawFirstCandidate{#2}{false}
    \drawSecondCandidate{#2}{false}
  }{#1}
}

\newcommand{\drawFirstAlone} [2][]{ \newpicture{\drawFirstCandidate{#2}{true}}{#1} }
\newcommand{\drawSecondAlone}[2][]{ \newpicture{\drawSecondCandidate{#2}{true}}{#1} }
\newcommand{\drawThirdAlone} [2][]{ \newpicture{\drawThirdCandidate{#2}{true}}{#1} }

% % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % %

\newcommand{\newpicture}[2]{
  \begin{tikzpicture}
  [
    agent/.style={draw, minimum size=0.7cm, inner sep=1},
    group/.style={agent, diamond},
    prof/.style={agent, circle},
    class/.style={draw, circle, fill},
    #2
  ]#1\end{tikzpicture}
}

%% Candidate #1 (by Group 1) with professors 1-4.
%% 1: r, 2: alone flag
\newcommand{\drawFirstCandidate}[2]{
  \def\r{#1}
  \def\alone{#2}

  \node[group, blue] (G1) {$G_1$};
  \draw (45 :\r)  node[prof] (P1) {$P_1$};
  \draw (0  :\r)  node[prof] (P2) {$P_2$};
  \draw (-45:\r)  node[prof] (P3) {$P_3$};
  \draw (-90:\r)  node[prof] (P4) {$P_4$};
  \draw [-, blue] (G1) -- (P1) node [midway, class, blue] {};
  \draw [-, blue] (G1) -- (P2) node [midway, class, blue] {};
  \draw [-, blue] (G1) -- (P3) node [midway, class, blue] {};
  \draw [-, blue] (G1) -- (P4) node [midway, class, blue] {};
  \ifthenelse{\boolean{\alone}}{}{
    \node[draw, ellipse, blue, dotted, fit=(G1) (P1) (P2) (P3) (P4),
          label={[blue]above:$\mathrm{Candidate}_1^{i_1}$},
          inner sep=-9pt, xshift=-12pt ] {};
    }
}

%% Candidate #2 (by Group 2) with professors 1,2,5,6.
%% 1: r, 2: alone flag
\newcommand{\drawSecondCandidate}[2]{
  \def\r{#1}
  \def\alone{#2}

  \ifthenelse{\boolean{\alone}} {
    \def\xshift{0pt}
    \def\yshift{0pt}
    }{
    \def\xshift{7cm}
    \def\yshift{3cm}
    }

  \begin{scope}[xshift=\xshift, yshift=\yshift]
    \node[group, red] (G2) {$G_2$};
    \ifthenelse{\boolean{\alone}}{
      \draw (180 :\r)  node[prof] (P1) {$P_1$};
      \draw (225 :\r)  node[prof] (P2) {$P_2$};
      }{}
    \draw (-90:\r) node[prof] (P5) {$P_5$};
    \draw (0  :\r) node[prof] (P6) {$P_6$};
    \draw [-, red] (G2) -- (P1) node [midway, class, red] {};
    \draw [-, red] (G2) -- (P2) node [midway, class, red] {};
    \draw [-, red] (G2) -- (P5) node [midway, class, red] {};
    \draw [-, red] (G2) -- (P6) node [midway, class, red] {};
    \ifthenelse{\boolean{\alone}}{}{
      \node[draw, ellipse, red, dotted, fit=(G2) (P1) (P2) (P5) (P6),
            label={[red]above:$\mathrm{Candidate}_2^{i_2}$},
            inner sep=-10pt, rotate=-6, xshift=19pt, yshift=13pt
            ] {};
      }
  \end{scope}
}


%% Candidate #3 (by Group 3) with professors 2,3,5,7.
%% 1: r, 2: alone flag
\newcommand{\drawThirdCandidate}[2]{
  \def\r{#1}
  \def\alone{#2}

  \ifthenelse{\boolean{\alone}} {
    \def\xshift{0pt}
    \def\yshift{0pt}
    }{
    \def\xshift{6cm}
    \def\yshift{-4.5cm}
    }

  \begin{scope}[xshift=\xshift, yshift=\yshift]
    \def\myGreen{green!40!black}
    \node[group, \myGreen] (G3) {$G_3$};
    \ifthenelse{\boolean{\alone}}{
      \draw (120 :\r)  node[prof] (P2) {$P_2$};
      \draw (225 :\r)  node[prof] (P3) {$P_3$};
      \draw (80  :\r)  node[prof] (P5) {$P_5$};
      }{}
    \draw (0:\r) node[prof] (P7) {$P_7$};
    \draw [-, \myGreen] (G3) -- (P2) node [midway, class, \myGreen] {};
    \draw [-, \myGreen] (G3) -- (P3) node [midway, class, \myGreen] {};
    \draw [-, \myGreen] (G3) -- (P5) node [midway, class, \myGreen] {};
    \draw [-, \myGreen] (G3) -- (P7) node [midway, class, \myGreen] {};
    \ifthenelse{\boolean{\alone}}{}{
      \node[draw, ellipse, \myGreen, dotted, fit=(G3) (P2) (P3) (P5) (P7),
            label={[\myGreen]right:$\mathrm{Candidate}_3^{i_3}$},
            inner sep=-20pt, rotate=-22, xshift=1pt, yshift=-10pt
            ] {};
      }
  \end{scope}
}

% % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % %
